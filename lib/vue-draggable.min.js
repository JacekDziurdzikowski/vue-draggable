!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("VueDraggable",[],e):"object"==typeof exports?exports.VueDraggable=e():t.VueDraggable=e()}(this,(function(){return function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);var i=function(t){this.targets=function(t,e){return t.querySelectorAll(e)}(t,this.defaultOptions.dropzoneSelector),this.items=function(t,e){return t.querySelectorAll(e)}(t,this.defaultOptions.draggableSelector);for(var e=0;e<this.targets.length;e++)this.targets[e].setAttribute("aria-dropeffect","none");for(var r=0;r<this.items.length;r++)this.items[r].setAttribute("draggable","true"),this.items[r].setAttribute("aria-grabbed","false"),this.items[r].setAttribute("tabindex","0")},n=function(){for(var t=document.querySelectorAll(".item-dropzone-area"),e=0;e<t.length;e++)t[e].remove()},s=function(t,e,r){for(var i=r.length,n=0;n<i;n++)r[n]!==e.owner&&"none"===r[n].getAttribute("aria-dropeffect")&&(r[n].setAttribute("aria-dropeffect","move"),r[n].setAttribute("tabindex","0"));for(var s=t.length,o=0;o<s;o++)t[o].parentNode!==e.owner&&t[o].getAttribute("aria-grabbed")&&(t[o].removeAttribute("aria-grabbed"),t[o].removeAttribute("tabindex"))},o=function(t,e,r){if(e.items.length){for(var i=0;i<r.length;i++)"none"!==r[i].getAttribute("aria-dropeffect")&&(r[i].setAttribute("aria-dropeffect","none"),r[i].removeAttribute("tabindex"));for(var n=0;n<t.length;n++)t[n].getAttribute("aria-grabbed")?"true"===t[n].getAttribute("aria-grabbed")&&t[n].setAttribute("tabindex","0"):(t[n].setAttribute("aria-grabbed","false"),t[n].setAttribute("tabindex","0"))}},a=function(t){return t.ctrlKey||t.metaKey||t.shiftKey};function l(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var c=function(t){this.selections.owner||(this.selections.owner=t.parentNode),(this.defaultOptions.multipleDropzonesItemsDraggingEnabled||this.selections.owner===t.parentNode)&&(t.setAttribute("aria-grabbed","true"),this.selections.items=this.selections.items.indexOf(t)>=0?this.selections.items:[].concat(l(this.selections.items),[t]))},u=function(t){t.setAttribute("aria-grabbed","false");for(var e=0;e<this.selections.items.length;e++)if(this.selections.items[e]===t){this.selections.items.splice(e,1);break}},f=function(){if(this.selections.items.length){this.selections.owner=null;for(var t=0;t<this.selections.items.length;t++)this.selections.items[t].setAttribute("aria-grabbed","false");this.selections.items=[]}},d=function(){throw new Error("Requested D&D stop...")};function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function g(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p=function(t,e,r){var i=function(t,e){return new CustomEvent(t,{detail:e})}(t,e);r.dispatchEvent(i)},b=function(t){var e=this.selections.droptarget.querySelectorAll(this.defaultOptions.draggableSelector),r=this.nextItemElement?Array.prototype.indexOf.call(e,this.nextItemElement):e.length,i=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(r,!0).forEach((function(e){g(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({ids:this.selections.items.map((function(t){return t.dataset.id})),index:r,nativeEvent:t},this.selections);this.selections.droptarget!==this.selections.owner?(p("added",i,this.selections.droptarget),p("removed",i,this.selections.owner)):p("reordered",i,this.selections.droptarget)},m=function(t){if(this.defaultOptions.handlerSelector&&!t.target.closest(this.defaultOptions.handlerSelector))return;var e=t.target.closest(this.defaultOptions.draggableSelector);e&&e.getAttribute("draggable")?(o(this.items,this.selections,this.targets),a(t)||"false"!==e.getAttribute("aria-grabbed")||(f.bind(this)(),c.bind(this)(e))):a(t)?o(this.items,this.selections,this.targets):(o(this.items,this.selections,this.targets),f.bind(this)())},v=function(t){var e=this,r=t.target.closest(this.defaultOptions.draggableSelector);if(r&&r.getAttribute("draggable")&&a(t))if(this.selections.items.length&&t.shiftKey){var i=this.selections.items.slice(-1).pop();this.items.forEach((function(t){(function(t,e,r){return t.parentNode===e.parentNode&&(e.offsetTop>r.offsetTop&&t.offsetTop<=e.offsetTop&&t.offsetTop>=r.offsetTop||t.offsetTop>=e.offsetTop&&t.offsetTop<=r.offsetTop)})(t,r,i)&&c.bind(e)(t)}))}else"true"===r.getAttribute("aria-grabbed")?(u.bind(this)(r),this.selections.items.length||(this.selections.owner=null)):c.bind(this)(r)},y={previousTarget:null,dragoverCalls:0},O=function(t){if(y.dragoverCalls%100==0||t.target!==y.previousTarget&&t.target&&"item-dropzone-area"!==t.target.className){y.dragoverCalls++,y.previousTarget=t.target,this.nextItemElement=t.target.closest(this.defaultOptions.draggableSelector),this.selections.droptarget=t.target.closest(this.defaultOptions.dropzoneSelector);var e=document.createElement("div");e.className="item-dropzone-area",n(),this.selections.droptarget&&this.nextItemElement&&this.selections.droptarget.insertBefore(e,y.previousTarget.closest(this.defaultOptions.draggableSelector)),this.selections.droptarget&&!this.nextItemElement&&this.selections.droptarget.appendChild(e)}},w=function(t){this.selections.items.length&&t.preventDefault(),this.defaultOptions.showDropzoneAreas&&O.bind(this)(t)};function j(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function D(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var A=function(t){var e=t.target.closest(this.defaultOptions.draggableSelector);if(this.defaultOptions.multipleDropzonesItemsDraggingEnabled||!e||this.selections.owner===e.parentNode){if("function"==typeof this.defaultOptions.onDragstart)try{this.defaultOptions.onDragstart(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?j(r,!0).forEach((function(e){D(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({nativeEvent:t,stop:d},this.selections))}catch(e){return t.preventDefault(),void n()}a(t)&&"false"===e.getAttribute("aria-grabbed")&&c.bind(this)(e),t.dataTransfer.setData("text",""),s(this.items,this.selections,this.targets)}else t.preventDefault()},E=function(t){this.related=t.target},P=function(){var t=function(t){var e=t;do{if(e&&1===e.nodeType&&e.getAttribute("aria-dropeffect"))return e}while(e=e?e.parentNode:null);return null}(this.related);t!==this.selections.droptarget&&(this.selections.droptarget&&(this.selections.droptarget.className=this.selections.droptarget.className.replace(/ dragover/g,"")),t&&(t.className+=" dragover"),this.selections.droptarget=t)};function S(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function x(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?S(r,!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function T(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var N=function(t){if("function"==typeof this.defaultOptions.onDragend)try{this.defaultOptions.onDragend(x({nativeEvent:t,stop:d},this.selections))}catch(t){return void n()}this.selections.droptarget&&(this.defaultOptions.reactivityEnabled?b.bind(this)(t):function(t,e,r){for(var i=0;i<e.length;i++)r?t.insertBefore(e[i],r):t.appendChild(e[i])}(this.selections.droptarget,this.selections.items,this.nextItemElement),"function"==typeof this.defaultOptions.onDrop&&this.defaultOptions.onDrop(x({nativeEvent:t,stop:function(){throw new Error("Stop method is available only for callbacks\n                    'onDragstart' and 'onDragend'. For more info look at\n                    https://github.com/Vivify-Ideas/vue-draggable/blob/master/README.md\n                  ")}},this.selections)),t.preventDefault()),this.selections.items.length&&(o(this.items,this.selections,this.targets),this.selections.droptarget&&(f.bind(this)(),this.selections.droptarget.className=this.selections.droptarget.className.replace(/ dragover/g,""),this.selections.droptarget=null)),n()},k=function(t){if(t.target.getAttribute("aria-grabbed")&&(32===t.keyCode&&(a(t)?"true"===t.target.getAttribute("aria-grabbed")?(1===this.selections.items.length&&o(this.items,this.selections,this.targets),u.bind(this)(t.target),this.selections.items.length&&s(this.items,this.selections,this.targets),this.selections.items.length||(this.selections.owner=null)):(c.bind(this)(t.target),s(this.items,this.selections,this.targets)):"false"===t.target.getAttribute("aria-grabbed")?(o(this.items,this.selections,this.targets),f.bind(this)(),c.bind(this)(t.target),s(this.items,this.selections,this.targets)):s(this.items,this.selections,this.targets),t.preventDefault()),77===t.keyCode&&a(t))){if(this.selections.items.length)if(s(this.items,this.selections,this.targets),this.selections.owner===this.targets[this.targets.length-1])this.targets[0].focus();else for(var e=0;e<this.targets.length;e++)if(this.selections.owner===this.targets[e]){this.targets[e+1].focus();break}t.preventDefault()}if(27===t.keyCode&&this.selections.items.length&&(o(this.items,this.selections,this.targets),this.selections.items[this.selections.items.length-1].focus(),f.bind(this)()),t.target.getAttribute("aria-dropeffect")&&(13===t.keyCode||77===t.keyCode&&a(t))){if(this.defaultOptions.reactivityEnabled)this.selections.droptarget=t.target,b.bind(this)(t);else for(var r=0;r<this.selections.items.length;r++)t.target.appendChild(this.selections.items[r]);o(this.items,this.selections,this.targets),this.selections.items[this.selections.items.length-1].focus(),f.bind(this)(),t.preventDefault()}},L=function(t){t.addEventListener("mousedown",m.bind(this),!1),t.addEventListener("mouseup",v.bind(this),!1),t.addEventListener("dragstart",A.bind(this),!1),t.addEventListener("keydown",k.bind(this),!1),t.addEventListener("dragenter",E.bind(this),!1),t.addEventListener("dragleave",P.bind(this),!1),t.addEventListener("dragover",w.bind(this),!1),t.addEventListener("dragend",N.bind(this),!1)};function C(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function I(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var z=function(t,e){return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?C(r,!0).forEach((function(e){I(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({dropzoneSelector:"ul",draggableSelector:"li",handlerSelector:null,reactivityEnabled:!0,multipleDropzonesItemsDraggingEnabled:!1,showDropzoneAreas:!0},e,{onDragstart:(e.onDragstart||function(){}).bind(t),onDragend:(e.onDragend||function(){}).bind(t),onDrop:(e.onDrop||function(){}).bind(t)})},q=function(){return{targets:null,items:null,nextItemElement:null,related:null,selections:{items:[],owner:null,droptarget:null}}};function $(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var K=function(){function t(e,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.assign(this,q(),{defaultOptions:z(r,i)},{el:e}),this.registerListeners(e),this.initiate(e)}var e,r,n;return e=t,(r=[{key:"registerListeners",value:function(t){L.bind(this)(t)}},{key:"initiate",value:function(t){i.bind(this)(t)}}])&&$(e.prototype,r),n&&$(e,n),t}();function V(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var _=["added","removed","reordered"],M={name:"VueDraggableGroup",props:{groups:{required:!0,type:Array},value:{required:!0,type:Array},itemsKey:{type:String,default:"items"}},render:function(){return this.$scopedSlots.default({})},methods:{added:function(t){var e,r=this,i=this.groups.map((function(t){return t[r.itemsKey]})).reduce((function(t,e){return[].concat(V(t),V(e))}),[]).filter((function(e){return t.detail.ids.map(Number).indexOf(e.id)>=0}));(e=this.value).splice.apply(e,[t.detail.index,0].concat(V(i))),this.$emit("change",this.groups)},removed:function(t){var e=this.value.filter((function(e){return t.detail.ids.map(Number).indexOf(e.id)<0}));this.$emit("input",e)},reordered:function(t,e){var r=this.value.filter((function(e){return t.detail.ids.map(Number).indexOf(e.id)>=0})),i=this.value.filter((function(e){return t.detail.ids.map(Number).indexOf(e.id)<0}));i.splice.apply(i,[t.detail.index,0].concat(V(r))),this.$emit("input",i),this.$emit("change",this.groups)},addListeners:function(){var t=this;_.forEach((function(e){return t.$el.addEventListener(e,t[e])}))},removeListeners:function(){var t=this;_.forEach((function(e){return t.$el.removeEventListener(e,t[e])}))}},mounted:function(){this.addListeners()},beforeDestroy:function(){this.removeListeners()}};r.d(e,"VueDraggableDirective",(function(){return R}));var B=[],R={bind:function(t,e,r){var i=new K(t,r.context,e.value);B.push(i)},componentUpdated:function(t){setTimeout((function(){B.forEach((function(e){e.el===t&&e.initiate(t)}))}))},unbind:function(t){B=B.filter((function(e){return e.el!==t}))}};K.install=function(t){t.directive("drag-and-drop",R),t.component("vue-draggable-group",M)};e.default=K}])}));
//# sourceMappingURL=vue-draggable.min.js.map